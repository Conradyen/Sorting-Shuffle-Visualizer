{"ast":null,"code":"import swap from \"../SortAlgo/swap\"; //https://labs.spotify.com/2014/02/28/how-to-shuffle-songs/\n\nfunction SpotifyShuffle(array) {\n  var animation = [];\n  var clusterMap = {\n    c1: [],\n    c2: [],\n    c3: []\n  };\n  var idx = {\n    c1: 0,\n    c2: 0,\n    c3: 0\n  };\n  cluster(array, clusterMap);\n  var len = array.length;\n  var offset = [0, 1, 2];\n  FY_Shuffle(offset);\n  let j;\n\n  for (j = 0; j < len - 1; j++) {\n    if (j >= offset[0]) {\n      if (clusterMap.c1.length > idx.c1) {\n        pushAnimation(array, animation, j, clusterMap.c1[idx.c1]);\n        swap(array, j, clusterMap.c1[idx.c1++]);\n      }\n    } else if (j >= offset[1]) {\n      if (clusterMap.c2.length > idx.c2) {\n        pushAnimation(array, animation, j, clusterMap.c2[idx.c2]);\n        swap(array, j, clusterMap.c2[idx.c2++]);\n      }\n    } else if (j >= offset[2]) {\n      if (clusterMap.c3.length > idx.c3) {\n        pushAnimation(array, animation, j, clusterMap.c3[idx.c3]);\n        swap(array, j, clusterMap.c3[idx.c3++]);\n      }\n    } else {\n      if (clusterMap.c1.length > idx.c1) {\n        pushAnimation(array, animation, j, clusterMap.c1[idx.c1]);\n        swap(array, j, clusterMap.c1[idx.c1++]);\n      } else if (clusterMap.c2.length > idx.c2) {\n        pushAnimation(array, animation, j, clusterMap.c2[idx.c2]);\n        swap(array, j, clusterMap.c2[idx.c2++]);\n      } else if (clusterMap.c3.length > idx.c3) {\n        pushAnimation(array, animation, j, clusterMap.c3[idx.c3]);\n        swap(array, j, clusterMap.c3[idx.c3++]);\n      }\n    }\n  }\n\n  return animation;\n}\n\nfunction pushAnimation(array, animation, i, j) {\n  animation.push([i, j]);\n  animation.push([i, j]);\n  animation.push([i, array[j]]);\n  animation.push([j, array[i]]);\n}\n\nfunction cluster(array, map) {\n  for (let i = 0; i < array.length - 1; i++) {\n    var num = array[i];\n\n    if (num < 300) {\n      map.c1.push(i);\n    } else if (num < 500 && num >= 300) {\n      map.c2.push(i);\n    } else {\n      map.c3.push(i);\n    }\n  }\n\n  FY_Shuffle(map.c1);\n  FY_Shuffle(map.c2);\n  FY_Shuffle(map.c3);\n}\n\nfunction FY_Shuffle(array) {\n  const len = array.length;\n\n  for (var i = 0; i < len - 2; i++) {\n    var min = i;\n    var max = len;\n    var random = Math.floor(Math.random() * (+max - +min)) + +min;\n    swap(array, i, random);\n  }\n}\n\nexport default SpotifyShuffle;","map":{"version":3,"sources":["/Users/yen/Documents/project/sorting-algo/src/Visualizer/ShuffleAlgo/SpotifyShuffle.js"],"names":["swap","SpotifyShuffle","array","animation","clusterMap","c1","c2","c3","idx","cluster","len","length","offset","FY_Shuffle","j","pushAnimation","i","push","map","num","min","max","random","Math","floor"],"mappings":"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","sourcesContent":["import swap from \"../SortAlgo/swap\";\n\n//https://labs.spotify.com/2014/02/28/how-to-shuffle-songs/\nfunction SpotifyShuffle(array) {\n  var animation = [];\n  var clusterMap = { c1: [], c2: [], c3: [] };\n  var idx = { c1: 0, c2: 0, c3: 0 };\n  cluster(array, clusterMap);\n  var len = array.length;\n  var offset = [0, 1, 2];\n  FY_Shuffle(offset);\n  let j;\n  for (j = 0; j < len - 1; j++) {\n    if (j >= offset[0]) {\n      if (clusterMap.c1.length > idx.c1) {\n        pushAnimation(array, animation, j, clusterMap.c1[idx.c1]);\n        swap(array, j, clusterMap.c1[idx.c1++]);\n      }\n    } else if (j >= offset[1]) {\n      if (clusterMap.c2.length > idx.c2) {\n        pushAnimation(array, animation, j, clusterMap.c2[idx.c2]);\n        swap(array, j, clusterMap.c2[idx.c2++]);\n      }\n    } else if (j >= offset[2]) {\n      if (clusterMap.c3.length > idx.c3) {\n        pushAnimation(array, animation, j, clusterMap.c3[idx.c3]);\n        swap(array, j, clusterMap.c3[idx.c3++]);\n      }\n    } else {\n      if (clusterMap.c1.length > idx.c1) {\n        pushAnimation(array, animation, j, clusterMap.c1[idx.c1]);\n        swap(array, j, clusterMap.c1[idx.c1++]);\n      } else if (clusterMap.c2.length > idx.c2) {\n        pushAnimation(array, animation, j, clusterMap.c2[idx.c2]);\n        swap(array, j, clusterMap.c2[idx.c2++]);\n      } else if (clusterMap.c3.length > idx.c3) {\n        pushAnimation(array, animation, j, clusterMap.c3[idx.c3]);\n        swap(array, j, clusterMap.c3[idx.c3++]);\n      }\n    }\n  }\n\n  return animation;\n}\n\nfunction pushAnimation(array, animation, i, j) {\n  animation.push([i, j]);\n  animation.push([i, j]);\n  animation.push([i, array[j]]);\n  animation.push([j, array[i]]);\n}\n\nfunction cluster(array, map) {\n  for (let i = 0; i < array.length - 1; i++) {\n    var num = array[i];\n    if (num < 300) {\n      map.c1.push(i);\n    } else if (num < 500 && num >= 300) {\n      map.c2.push(i);\n    } else {\n      map.c3.push(i);\n    }\n  }\n  FY_Shuffle(map.c1);\n  FY_Shuffle(map.c2);\n  FY_Shuffle(map.c3);\n}\n\nfunction FY_Shuffle(array) {\n  const len = array.length;\n  for (var i = 0; i < len - 2; i++) {\n    var min = i;\n    var max = len;\n    var random = Math.floor(Math.random() * (+max - +min)) + +min;\n    swap(array, i, random);\n  }\n}\n\nexport default SpotifyShuffle;\n"]},"metadata":{},"sourceType":"module"}